import{_ as T,d as R,a as S,b as N,c as H,f as M,u as l,r as B,o as g,s as h,w as n,l as o,k as d,t as c,q as E,j,p as x,bY as O,y as A,M as V,A as U,bZ as W,z as q,T as L}from"./index-39d45874.js";import{C as I}from"./clipboard-6108ee01.js";import{C as J}from"./CopyOutlined-1ad6fae4.js";const K={props:{api:{type:Object,required:!0},swaggerInstance:{type:Object,required:!0},debugSend:{type:Boolean,default:!1},responseHeaders:{type:Array},responseRawText:{type:String,default:""},responseCurlText:{type:String,default:""},responseStatus:{type:Object},responseContent:{type:Object},responseFieldDescriptionChecked:{type:Boolean,default:!0}},components:{CopyOutlined:J,EditorDebugShow:R(()=>S(()=>import("./EditorDebugShow-8b87d0df.js"),["./EditorDebugShow-8b87d0df.js","./index-2c86cef6.js","./index-39d45874.js","..\\css\\index-7ef90919.css","./ext-language_tools-0b770066.js"],import.meta.url))},setup(){const s=N(),t=H(()=>s.language),{messages:e}=M();return{language:t,messages:e}},data(){return{pagination:!1,i18n:null,base64Image:!1,debugResponse:!0,responseHeaderColumn:[]}},watch:{language:function(s,t){this.initI18n()}},computed:{responseSizeText(){var s="0 B",t=this.responseStatus;if(t!=null&&t!=null){var e=t.size,i=(e/1024).toFixed(2),a=(e/1024/1024).toFixed(2);i>1?s=i+" KB":a>1?s=a+" MB":s=e+" B"}return s}},created(){this.initI18n(),this.copyRawText(),this.copyCurlText()},methods:{getCurrentI18nInstance(){return this.messages[this.language]},base64Init(){var s=l.getValue(this.responseContent,"base64","",!0);l.strNotBlank(s)&&(this.base64Image=!0)},initI18n(){this.i18n=this.getCurrentI18nInstance(),this.responseHeaderColumn=this.i18n.table.debugResponseHeaderColumns},copyRawText(){var s=this,t="btnDebugCopyRaw"+this.api.id,e=new I("#"+t,{text(){return s.responseRawText}}),i=this.i18n.message.copy.raw.success,a=this.i18n.message.copy.raw.fail;e.on("success",function(u){s.$message.info(i)}),e.on("error",function(u){s.$message.info(a)})},copyCurlText(){var s=this,t="btnDebugCopyCurl"+this.api.id,e=new I("#"+t,{text(){return s.responseCurlText}}),i=this.i18n.message.copy.curl.success,a=this.i18n.message.copy.curl.fail;e.on("success",function(u){s.$message.info(i)}),e.on("error",function(u){s.$message.info(a)})},resetResponseContent(){if(this.responseContent!=null&&this.responseContent.mode=="json"){const s=this.responseContent.text;this.responseContent.text=l.json5stringify(l.json5parse(s))}},showFieldDesChange(s){var t=s.target.checked;this.$emit("debugShowFieldDescriptionChange",t),this.toggleFieldDescription(t)},debugEditorChange(s){this.$emit("debugEditorChange",s)},toggleFieldDescription(s){var t="responseEditorContent"+this.api.id,e=document.getElementById(t),i=e.getElementsByClassName("knife4j-debug-editor-field-description");l.arrNotEmpty(i)?i.forEach(function(a){s?a.style.display="block":a.style.display="none"}):this.showEditorFieldAnyWay()},showEditorFieldDescription(s){var t=this;l.checkUndefined(s)&&parseInt(s)<=200&&setTimeout(()=>{t.showEditorFieldWait()},100)},showEditorFieldWait(){this.debugSend&&this.responseFieldDescriptionChecked&&this.responseContent.mode=="json"&&this.showEditorFieldAnyWay()},showEditorFieldAnyWay(){var s=this.swaggerInstance,t=this.api.getHttpSuccessCodeObject(),e="responseEditorContent"+this.api.id,i=document.getElementById(e),a=[],u=i.getElementsByClassName("ace_text-layer"),C=0,r=i.querySelector(".ace_print-margin");if(l.checkUndefined(r)&&l.checkUndefined(r.style)&&(C=r.style.left),u.length>0)for(var f=u[0].getElementsByClassName("ace_line"),m=0;m<f.length;m++){var p=f[m],y=p.getElementsByClassName("ace_variable"),_=null;if(l.arrNotEmpty(y)){_=l.toString(y[0].innerHTML,"").replace(/^"(.*)"$/g,"$1");var v=p.getElementsByClassName("knife4j-debug-editor-field-description");if(!l.arrNotEmpty(v)){var b=document.createElement("span");b.className="knife4j-debug-editor-field-description",b.innerHTML=t.responseDescriptionFind(a,_,s),b.style.left=C,p.appendChild(b)}}var k=p.getElementsByClassName("ace_paren");if(l.arrNotEmpty(k)){for(var D=[],w=0;w<k.length;w++)D.push(k[w].innerHTML);var F=D.join("");switch(F){case"[":case"{":a.push(_||0);break;case"}":case"]":a.pop();break}}}}}},z={style:{color:"#919191"}},P={class:"key"},G={class:"value"},Y={class:"key"},Z={class:"value"},Q={class:"key"},X={class:"value"},$={key:0},ee=["src"],se={key:1},te=["id"],ne={class:"knife4j-debug-response-curl"},oe=["src"];function ae(s,t,e,i,a,u){const C=O,r=A,f=V,m=B("editor-debug-show"),p=U,y=B("CopyOutlined"),_=W,v=q,b=L;return g(),h(r,{class:"knife4j-debug-response"},{default:n(()=>[e.debugSend?(g(),h(r,{key:0},{default:n(()=>[o(b,{defaultActiveKey:"debugResponse"},{rightExtra:n(()=>[e.responseStatus?(g(),h(r,{key:0,class:"knife4j-debug-status"},{default:n(()=>[d("span",null,[o(C,{defaultChecked:e.responseFieldDescriptionChecked,onChange:u.showFieldDesChange},{default:n(()=>[d("span",z,c(s.$t("debug.response.showDes")),1)]),_:1},8,["defaultChecked","onChange"])]),d("span",P,c(s.$t("debug.response.code")),1),d("span",G,c(e.responseStatus.code),1),d("span",Y,c(s.$t("debug.response.cost")),1),d("span",Z,c(e.responseStatus.cost),1),d("span",Q,c(s.$t("debug.response.size")),1),d("span",X,c(u.responseSizeText),1)]),_:1})):E("",!0)]),default:n(()=>[o(p,{tab:a.i18n.debug.response.content,key:"debugResponse"},{default:n(()=>[e.responseContent?(g(),h(r,{key:0},{default:n(()=>[e.responseContent.blobFlag?(g(),h(r,{key:0},{default:n(()=>[e.responseContent.imageFlag?(g(),j("div",$,[d("img",{src:e.responseContent.blobUrl},null,8,ee)])):(g(),j("div",se,[o(f,{type:"link",href:e.responseContent.blobUrl,download:e.responseContent.blobFileName},{default:n(()=>[x(c(s.$t("debug.response.download")),1)]),_:1},8,["href","download"])]))]),_:1})):(g(),j("div",{key:1,id:"responseEditorContent"+e.api.id},[o(m,{onShowDescription:u.showEditorFieldDescription,onDebugEditorChange:u.debugEditorChange,debugResponse:a.debugResponse,value:e.responseContent.text,mode:e.responseContent.mode},null,8,["onShowDescription","onDebugEditorChange","debugResponse","value","mode"])],8,te))]),_:1})):E("",!0)]),_:1},8,["tab"]),o(p,{tab:"Raw",key:"debugRaw",forceRender:""},{default:n(()=>[o(r,{class:"knife4j-debug-response-mt"},{default:n(()=>[o(f,{id:"btnDebugCopyRaw"+e.api.id,type:"primary"},{default:n(()=>[o(y),t[0]||(t[0]=x()),d("span",null,c(s.$t("debug.response.copy")),1)]),_:1},8,["id"])]),_:1}),o(r,{class:"knife4j-debug-response-mt"},{default:n(()=>[o(_,{rows:10,value:e.responseRawText},null,8,["value"])]),_:1})]),_:1}),o(p,{tab:"Headers",key:"debugHeaders"},{default:n(()=>[o(r,{class:"knife4j-debug-response-mt"},{default:n(()=>[o(v,{bordered:"",size:"small",columns:a.responseHeaderColumn,pagination:a.pagination,dataSource:e.responseHeaders,rowKey:"id"},null,8,["columns","pagination","dataSource"])]),_:1})]),_:1}),o(p,{tab:"Curl",key:"debugCurl"},{default:n(()=>[o(r,{class:"knife4j-debug-response-mt"},{default:n(()=>[o(f,{id:"btnDebugCopyCurl"+e.api.id,type:"primary"},{default:n(()=>[o(y),t[1]||(t[1]=x()),d("span",null,c(s.$t("debug.response.copy")),1)]),_:1},8,["id"])]),_:1}),o(r,{class:"knife4j-debug-response-mt"},{default:n(()=>[d("pre",ne,c(e.responseCurlText),1)]),_:1})]),_:1}),e.responseContent!=null&&e.responseContent.base64!=null&&e.responseContent.base64!=""?(g(),h(p,{tab:"Base64Img",key:"debugBase64Img"},{default:n(()=>[o(r,{class:"knife4j-debug-response-mt"},{default:n(()=>[d("img",{src:e.responseContent.base64},null,8,oe)]),_:1})]),_:1})):E("",!0)]),_:1})]),_:1})):(g(),h(r,{key:1}))]),_:1})}const le=T(K,[["render",ae]]);export{le as default};
